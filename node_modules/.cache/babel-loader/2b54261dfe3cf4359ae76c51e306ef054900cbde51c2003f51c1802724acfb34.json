{"ast":null,"code":"var _jsxFileName = \"/Users/ericwang/Theseus/typing-racer/src/components/RaceTrack.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TrackContainer = styled.div`\n  width: 100%;\n  height: 160px; // Increased height to accommodate two lanes\n  background: linear-gradient(to bottom, #87CEEB, #4682B4);\n  border-radius: 60px;\n  position: relative;\n  overflow: hidden;\n  margin-bottom: 30px;\n  border: 4px solid #333;\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);\n`;\n_c = TrackContainer;\nconst cloudFloat = keyframes`\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-100%);\n  }\n`;\nconst Clouds = styled.div`\n  position: absolute;\n  top: 10px;\n  width: 200%;\n  height: 20px;\n  background: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 120'%3E%3Cpath fill='%23fff' d='M0 0h1000v120H0z'/%3E%3Ccircle fill='%23fff' cx='100' cy='70' r='30'/%3E%3Ccircle fill='%23fff' cx='160' cy='70' r='40'/%3E%3Ccircle fill='%23fff' cx='220' cy='70' r='25'/%3E%3Ccircle fill='%23fff' cx='350' cy='70' r='35'/%3E%3Ccircle fill='%23fff' cx='420' cy='70' r='30'/%3E%3Ccircle fill='%23fff' cx='500' cy='70' r='40'/%3E%3Ccircle fill='%23fff' cx='580' cy='70' r='25'/%3E%3Ccircle fill='%23fff' cx='650' cy='70' r='35'/%3E%3Ccircle fill='%23fff' cx='720' cy='70' r='30'/%3E%3Ccircle fill='%23fff' cx='800' cy='70' r='40'/%3E%3Ccircle fill='%23fff' cx='880' cy='70' r='25'/%3E%3Ccircle fill='%23fff' cx='950' cy='70' r='35'/%3E%3C/svg%3E\") repeat-x;\n  opacity: 0.7;\n  z-index: 1;\n  animation: ${cloudFloat} 60s linear infinite;\n`;\n_c2 = Clouds;\nconst TrackRoad = styled.div`\n  width: 100%;\n  height: 100px; // Increased height for two lanes\n  background: linear-gradient(to bottom, #555, #333);\n  position: absolute;\n  top: 60%;\n  transform: translateY(-50%);\n  \n  &::before {\n    content: '';\n    position: absolute;\n    height: 6px;\n    width: 100%;\n    background: repeating-linear-gradient(\n      to right,\n      #fff,\n      #fff 30px,\n      transparent 30px,\n      transparent 60px\n    );\n    top: 25%; // Top lane center\n    transform: translateY(-50%);\n  }\n  \n  &::after {\n    content: '';\n    position: absolute;\n    height: 6px;\n    width: 100%;\n    background: repeating-linear-gradient(\n      to right,\n      #fff,\n      #fff 30px,\n      transparent 30px,\n      transparent 60px\n    );\n    top: 75%; // Bottom lane center\n    transform: translateY(-50%);\n  }\n`;\n_c3 = TrackRoad;\nconst LaneDivider = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 4px;\n  background: repeating-linear-gradient(\n    to right,\n    #ffeb3b,\n    #ffeb3b 20px,\n    transparent 20px,\n    transparent 40px\n  );\n  top: 60%;\n  transform: translateY(-50%);\n  z-index: 2;\n  opacity: 0.8;\n`;\n_c4 = LaneDivider;\nconst finishLinePulse = keyframes`\n  0%, 100% {\n    box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);\n  }\n`;\nconst FinishLine = styled.div`\n  position: absolute;\n  right: 20px;\n  height: 120px; // Increased height for two lanes\n  width: 14px;\n  background: repeating-linear-gradient(\n    to bottom,\n    black,\n    black 10px,\n    white 10px,\n    white 20px\n  );\n  top: 60%;\n  transform: translateY(-50%);\n  z-index: 3;\n  animation: ${finishLinePulse} 2s infinite;\n  \n  &::after {\n    content: '🏁';\n    position: absolute;\n    font-size: 20px;\n    right: -25px;\n    top: -25px;\n  }\n`;\n_c5 = FinishLine;\nconst StartLine = styled.div`\n  position: absolute;\n  left: 20px;\n  height: 120px; // Increased height for two lanes\n  width: 14px;\n  background: repeating-linear-gradient(\n    to bottom,\n    white,\n    white 10px,\n    green 10px,\n    green 20px\n  );\n  top: 60%;\n  transform: translateY(-50%);\n  z-index: 3;\n  \n  &::after {\n    content: '🏁';\n    position: absolute;\n    font-size: 20px;\n    left: -25px;\n    top: -25px;\n    transform: scaleX(-1);\n  }\n`;\n_c6 = StartLine;\nconst carBounce = keyframes`\n  0%, 100% {\n    transform: translateY(-50%);\n  }\n  50% {\n    transform: translateY(-53%);\n  }\n`;\nconst wheelSpin = keyframes`\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n`;\nconst Car = styled.div`\n  width: 80px;\n  height: 40px;\n  position: absolute;\n  top: ${props => props.isTopLane ? '45%' : '75%'};\n  transform: translateY(-50%);\n  left: ${props => Math.max(5, Math.min(90, props.position))}%;\n  transition: left 0.3s ease-out;\n  z-index: 4;\n  animation: ${carBounce} 0.6s ease-in-out infinite;\n  opacity: ${props => props.isShadow ? 0.6 : 1};\n  filter: ${props => props.isShadow ? 'grayscale(70%)' : 'none'};\n  \n  &::before {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: ${props => props.isShadow ? 'linear-gradient(to bottom, #777, #555)' : 'linear-gradient(to bottom, #e74c3c, #c0392b)'};\n    border-radius: 12px;\n    box-shadow: 0 6px 10px rgba(0, 0, 0, 0.4);\n  }\n  \n  /* Car windows */\n  &::after {\n    content: '';\n    position: absolute;\n    width: 30px;\n    height: 22px;\n    background: ${props => props.isShadow ? 'linear-gradient(135deg, #999, #777)' : 'linear-gradient(135deg, #3498db, #2980b9)'};\n    border-radius: 6px;\n    top: 4px;\n    left: 12px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  }\n`;\n_c7 = Car;\nconst Wheel = styled.div`\n  width: 16px;\n  height: 16px;\n  background-color: #333;\n  border-radius: 50%;\n  position: absolute;\n  bottom: -7px;\n  left: ${props => props.left}px;\n  border: 3px solid #222;\n  animation: ${wheelSpin} 0.5s linear infinite;\n  transform-origin: center center;\n  \n  /* Wheel cap */\n  &::after {\n    content: '';\n    position: absolute;\n    width: 7px;\n    height: 7px;\n    background-color: #aaa;\n    border-radius: 50%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n`;\n_c8 = Wheel;\nconst headlightFlash = keyframes`\n  0%, 100% {\n    opacity: 0.7;\n    box-shadow: 0 0 10px 3px rgba(255, 235, 59, 0.7);\n  }\n  50% {\n    opacity: 1;\n    box-shadow: 0 0 15px 5px rgba(255, 235, 59, 0.9);\n  }\n`;\nconst Headlight = styled.div`\n  width: 8px;\n  height: 8px;\n  background-color: #ffeb3b;\n  border-radius: 50%;\n  position: absolute;\n  bottom: 14px;\n  left: ${props => props.left}px;\n  box-shadow: 0 0 10px 3px rgba(255, 235, 59, 0.7);\n  z-index: 5;\n  animation: ${headlightFlash} 1s infinite;\n`;\n_c9 = Headlight;\nconst Exhaust = styled.div`\n  position: absolute;\n  width: 6px;\n  height: 4px;\n  background-color: #333;\n  border-radius: 2px;\n  bottom: 8px;\n  left: 5px;\n  z-index: 3;\n\n  &::after {\n    content: '';\n    position: absolute;\n    width: 12px;\n    height: 8px;\n    background: linear-gradient(to left, rgba(100, 100, 100, 0.8), transparent);\n    left: -12px;\n    top: -2px;\n    border-radius: 4px;\n  }\n`;\n_c10 = Exhaust;\nconst MileMarker = styled.div`\n  position: absolute;\n  top: 25%;\n  bottom: 25%;\n  width: 3px;\n  background-color: rgba(255, 255, 255, 0.5);\n  left: ${props => props.position}%;\n  z-index: 2;\n  \n  &::after {\n    content: '';\n    position: absolute;\n    bottom: -5px;\n    left: -4px;\n    width: 12px;\n    height: 12px;\n    background-color: rgba(255, 255, 255, 0.7);\n    border-radius: 50%;\n    box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);\n  }\n  \n  &::before {\n    content: '${props => props.position}%';\n    position: absolute;\n    top: -20px;\n    left: -10px;\n    color: white;\n    font-weight: bold;\n    font-size: 12px;\n    text-shadow: 0 0 2px rgba(0, 0, 0, 0.8);\n  }\n`;\n_c11 = MileMarker;\nconst YouLabel = styled.div`\n  position: absolute;\n  top: 30%;\n  left: 40px;\n  color: white;\n  font-weight: bold;\n  font-size: 14px;\n  text-shadow: 0 0 4px rgba(0, 0, 0, 0.8);\n  background-color: rgba(231, 76, 60, 0.7);\n  padding: 3px 8px;\n  border-radius: 10px;\n  z-index: 10;\n`;\n_c12 = YouLabel;\nconst PreviousBestLabel = styled.div`\n  position: absolute;\n  top: 80%;\n  left: 40px;\n  color: white;\n  font-weight: bold;\n  font-size: 14px;\n  text-shadow: 0 0 4px rgba(0, 0, 0, 0.8);\n  background-color: rgba(0, 0, 0, 0.5);\n  padding: 3px 8px;\n  border-radius: 10px;\n  z-index: 10;\n`;\n_c13 = PreviousBestLabel;\nconst RaceTrack = ({\n  position,\n  previousBestPosition = 0\n}) => {\n  _s();\n  // Use ref to track previous position to prevent backward movement\n  const prevPositionRef = useRef(0);\n  const displayPositionRef = useRef(0);\n\n  // Use a smaller value to make car movement more gradual\n  const speedFactor = 0.15; // Reduced from 0.25 to make movement even smoother\n\n  useEffect(() => {\n    // Track animation frame to allow cancellation\n    let animationFrameId;\n\n    // Animation function for smooth car movement\n    const animatePosition = () => {\n      // Calculate the new position with easing\n      const targetPosition = Math.max(5, Math.min(90, position));\n      const currentPosition = displayPositionRef.current;\n      const distance = targetPosition - currentPosition;\n\n      // Only update if there's a significant distance to travel\n      if (Math.abs(distance) > 0.1) {\n        // Move a percentage of the remaining distance for smooth easing\n        const newPosition = currentPosition + distance * speedFactor;\n        displayPositionRef.current = newPosition;\n        prevPositionRef.current = newPosition;\n\n        // Continue animation\n        animationFrameId = requestAnimationFrame(animatePosition);\n      } else if (distance !== 0) {\n        // Final step - snap to target position\n        displayPositionRef.current = targetPosition;\n        prevPositionRef.current = targetPosition;\n      }\n    };\n\n    // Start animation\n    animationFrameId = requestAnimationFrame(animatePosition);\n\n    // Cleanup animation on unmount or when position changes\n    return () => {\n      if (animationFrameId) {\n        cancelAnimationFrame(animationFrameId);\n      }\n    };\n  }, [position, speedFactor]);\n\n  // Use the current display position for rendering\n  const carPosition = displayPositionRef.current;\n\n  // Previous best position\n  const shadowPosition = previousBestPosition < 5 ? 5 : previousBestPosition;\n\n  // Calculate position for mile markers\n  const mileMarkers = [25, 50, 75];\n  return /*#__PURE__*/_jsxDEV(TrackContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Clouds, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TrackRoad, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LaneDivider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(StartLine, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 7\n    }, this), mileMarkers.map((markerPos, index) => /*#__PURE__*/_jsxDEV(MileMarker, {\n      position: markerPos\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(FinishLine, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(YouLabel, {\n      children: \"You\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Car, {\n      position: carPosition,\n      isTopLane: true,\n      children: [/*#__PURE__*/_jsxDEV(Wheel, {\n        left: 18\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Wheel, {\n        left: 55,\n        isRear: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Headlight, {\n        left: 78\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Headlight, {\n        left: 78\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Exhaust, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PreviousBestLabel, {\n      children: \"Best\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Car, {\n      position: shadowPosition,\n      isTopLane: false,\n      isShadow: true,\n      children: [/*#__PURE__*/_jsxDEV(Wheel, {\n        left: 18\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Wheel, {\n        left: 55,\n        isRear: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 408,\n    columnNumber: 5\n  }, this);\n};\n_s(RaceTrack, \"mPuxGZed/RbvX+RUZOvgqgzvNBE=\");\n_c14 = RaceTrack;\nexport default RaceTrack;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13, _c14;\n$RefreshReg$(_c, \"TrackContainer\");\n$RefreshReg$(_c2, \"Clouds\");\n$RefreshReg$(_c3, \"TrackRoad\");\n$RefreshReg$(_c4, \"LaneDivider\");\n$RefreshReg$(_c5, \"FinishLine\");\n$RefreshReg$(_c6, \"StartLine\");\n$RefreshReg$(_c7, \"Car\");\n$RefreshReg$(_c8, \"Wheel\");\n$RefreshReg$(_c9, \"Headlight\");\n$RefreshReg$(_c10, \"Exhaust\");\n$RefreshReg$(_c11, \"MileMarker\");\n$RefreshReg$(_c12, \"YouLabel\");\n$RefreshReg$(_c13, \"PreviousBestLabel\");\n$RefreshReg$(_c14, \"RaceTrack\");","map":{"version":3,"names":["React","useEffect","useRef","styled","keyframes","jsxDEV","_jsxDEV","TrackContainer","div","_c","cloudFloat","Clouds","_c2","TrackRoad","_c3","LaneDivider","_c4","finishLinePulse","FinishLine","_c5","StartLine","_c6","carBounce","wheelSpin","Car","props","isTopLane","Math","max","min","position","isShadow","_c7","Wheel","left","_c8","headlightFlash","Headlight","_c9","Exhaust","_c10","MileMarker","_c11","YouLabel","_c12","PreviousBestLabel","_c13","RaceTrack","previousBestPosition","_s","prevPositionRef","displayPositionRef","speedFactor","animationFrameId","animatePosition","targetPosition","currentPosition","current","distance","abs","newPosition","requestAnimationFrame","cancelAnimationFrame","carPosition","shadowPosition","mileMarkers","children","fileName","_jsxFileName","lineNumber","columnNumber","map","markerPos","index","isRear","_c14","$RefreshReg$"],"sources":["/Users/ericwang/Theseus/typing-racer/src/components/RaceTrack.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport styled, { keyframes } from 'styled-components';\n\ninterface RaceTrackProps {\n  position: number; // 0-100 percentage\n  previousBestPosition?: number; // Previous best score position\n}\n\nconst TrackContainer = styled.div`\n  width: 100%;\n  height: 160px; // Increased height to accommodate two lanes\n  background: linear-gradient(to bottom, #87CEEB, #4682B4);\n  border-radius: 60px;\n  position: relative;\n  overflow: hidden;\n  margin-bottom: 30px;\n  border: 4px solid #333;\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);\n`;\n\nconst cloudFloat = keyframes`\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-100%);\n  }\n`;\n\nconst Clouds = styled.div`\n  position: absolute;\n  top: 10px;\n  width: 200%;\n  height: 20px;\n  background: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 120'%3E%3Cpath fill='%23fff' d='M0 0h1000v120H0z'/%3E%3Ccircle fill='%23fff' cx='100' cy='70' r='30'/%3E%3Ccircle fill='%23fff' cx='160' cy='70' r='40'/%3E%3Ccircle fill='%23fff' cx='220' cy='70' r='25'/%3E%3Ccircle fill='%23fff' cx='350' cy='70' r='35'/%3E%3Ccircle fill='%23fff' cx='420' cy='70' r='30'/%3E%3Ccircle fill='%23fff' cx='500' cy='70' r='40'/%3E%3Ccircle fill='%23fff' cx='580' cy='70' r='25'/%3E%3Ccircle fill='%23fff' cx='650' cy='70' r='35'/%3E%3Ccircle fill='%23fff' cx='720' cy='70' r='30'/%3E%3Ccircle fill='%23fff' cx='800' cy='70' r='40'/%3E%3Ccircle fill='%23fff' cx='880' cy='70' r='25'/%3E%3Ccircle fill='%23fff' cx='950' cy='70' r='35'/%3E%3C/svg%3E\") repeat-x;\n  opacity: 0.7;\n  z-index: 1;\n  animation: ${cloudFloat} 60s linear infinite;\n`;\n\nconst TrackRoad = styled.div`\n  width: 100%;\n  height: 100px; // Increased height for two lanes\n  background: linear-gradient(to bottom, #555, #333);\n  position: absolute;\n  top: 60%;\n  transform: translateY(-50%);\n  \n  &::before {\n    content: '';\n    position: absolute;\n    height: 6px;\n    width: 100%;\n    background: repeating-linear-gradient(\n      to right,\n      #fff,\n      #fff 30px,\n      transparent 30px,\n      transparent 60px\n    );\n    top: 25%; // Top lane center\n    transform: translateY(-50%);\n  }\n  \n  &::after {\n    content: '';\n    position: absolute;\n    height: 6px;\n    width: 100%;\n    background: repeating-linear-gradient(\n      to right,\n      #fff,\n      #fff 30px,\n      transparent 30px,\n      transparent 60px\n    );\n    top: 75%; // Bottom lane center\n    transform: translateY(-50%);\n  }\n`;\n\nconst LaneDivider = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 4px;\n  background: repeating-linear-gradient(\n    to right,\n    #ffeb3b,\n    #ffeb3b 20px,\n    transparent 20px,\n    transparent 40px\n  );\n  top: 60%;\n  transform: translateY(-50%);\n  z-index: 2;\n  opacity: 0.8;\n`;\n\nconst finishLinePulse = keyframes`\n  0%, 100% {\n    box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);\n  }\n  50% {\n    box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);\n  }\n`;\n\nconst FinishLine = styled.div`\n  position: absolute;\n  right: 20px;\n  height: 120px; // Increased height for two lanes\n  width: 14px;\n  background: repeating-linear-gradient(\n    to bottom,\n    black,\n    black 10px,\n    white 10px,\n    white 20px\n  );\n  top: 60%;\n  transform: translateY(-50%);\n  z-index: 3;\n  animation: ${finishLinePulse} 2s infinite;\n  \n  &::after {\n    content: '🏁';\n    position: absolute;\n    font-size: 20px;\n    right: -25px;\n    top: -25px;\n  }\n`;\n\nconst StartLine = styled.div`\n  position: absolute;\n  left: 20px;\n  height: 120px; // Increased height for two lanes\n  width: 14px;\n  background: repeating-linear-gradient(\n    to bottom,\n    white,\n    white 10px,\n    green 10px,\n    green 20px\n  );\n  top: 60%;\n  transform: translateY(-50%);\n  z-index: 3;\n  \n  &::after {\n    content: '🏁';\n    position: absolute;\n    font-size: 20px;\n    left: -25px;\n    top: -25px;\n    transform: scaleX(-1);\n  }\n`;\n\nconst carBounce = keyframes`\n  0%, 100% {\n    transform: translateY(-50%);\n  }\n  50% {\n    transform: translateY(-53%);\n  }\n`;\n\nconst wheelSpin = keyframes`\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n`;\n\nconst Car = styled.div<{ position: number; isTopLane?: boolean; isShadow?: boolean }>`\n  width: 80px;\n  height: 40px;\n  position: absolute;\n  top: ${props => props.isTopLane ? '45%' : '75%'};\n  transform: translateY(-50%);\n  left: ${props => Math.max(5, Math.min(90, props.position))}%;\n  transition: left 0.3s ease-out;\n  z-index: 4;\n  animation: ${carBounce} 0.6s ease-in-out infinite;\n  opacity: ${props => props.isShadow ? 0.6 : 1};\n  filter: ${props => props.isShadow ? 'grayscale(70%)' : 'none'};\n  \n  &::before {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: ${props => props.isShadow \n      ? 'linear-gradient(to bottom, #777, #555)'\n      : 'linear-gradient(to bottom, #e74c3c, #c0392b)'};\n    border-radius: 12px;\n    box-shadow: 0 6px 10px rgba(0, 0, 0, 0.4);\n  }\n  \n  /* Car windows */\n  &::after {\n    content: '';\n    position: absolute;\n    width: 30px;\n    height: 22px;\n    background: ${props => props.isShadow \n      ? 'linear-gradient(135deg, #999, #777)'\n      : 'linear-gradient(135deg, #3498db, #2980b9)'};\n    border-radius: 6px;\n    top: 4px;\n    left: 12px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  }\n`;\n\nconst Wheel = styled.div<{ left: number; isRear?: boolean }>`\n  width: 16px;\n  height: 16px;\n  background-color: #333;\n  border-radius: 50%;\n  position: absolute;\n  bottom: -7px;\n  left: ${props => props.left}px;\n  border: 3px solid #222;\n  animation: ${wheelSpin} 0.5s linear infinite;\n  transform-origin: center center;\n  \n  /* Wheel cap */\n  &::after {\n    content: '';\n    position: absolute;\n    width: 7px;\n    height: 7px;\n    background-color: #aaa;\n    border-radius: 50%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n`;\n\nconst headlightFlash = keyframes`\n  0%, 100% {\n    opacity: 0.7;\n    box-shadow: 0 0 10px 3px rgba(255, 235, 59, 0.7);\n  }\n  50% {\n    opacity: 1;\n    box-shadow: 0 0 15px 5px rgba(255, 235, 59, 0.9);\n  }\n`;\n\nconst Headlight = styled.div<{ left: number }>`\n  width: 8px;\n  height: 8px;\n  background-color: #ffeb3b;\n  border-radius: 50%;\n  position: absolute;\n  bottom: 14px;\n  left: ${props => props.left}px;\n  box-shadow: 0 0 10px 3px rgba(255, 235, 59, 0.7);\n  z-index: 5;\n  animation: ${headlightFlash} 1s infinite;\n`;\n\nconst Exhaust = styled.div`\n  position: absolute;\n  width: 6px;\n  height: 4px;\n  background-color: #333;\n  border-radius: 2px;\n  bottom: 8px;\n  left: 5px;\n  z-index: 3;\n\n  &::after {\n    content: '';\n    position: absolute;\n    width: 12px;\n    height: 8px;\n    background: linear-gradient(to left, rgba(100, 100, 100, 0.8), transparent);\n    left: -12px;\n    top: -2px;\n    border-radius: 4px;\n  }\n`;\n\nconst MileMarker = styled.div<{ position: number }>`\n  position: absolute;\n  top: 25%;\n  bottom: 25%;\n  width: 3px;\n  background-color: rgba(255, 255, 255, 0.5);\n  left: ${props => props.position}%;\n  z-index: 2;\n  \n  &::after {\n    content: '';\n    position: absolute;\n    bottom: -5px;\n    left: -4px;\n    width: 12px;\n    height: 12px;\n    background-color: rgba(255, 255, 255, 0.7);\n    border-radius: 50%;\n    box-shadow: 0 0 5px rgba(255, 255, 255, 0.5);\n  }\n  \n  &::before {\n    content: '${props => props.position}%';\n    position: absolute;\n    top: -20px;\n    left: -10px;\n    color: white;\n    font-weight: bold;\n    font-size: 12px;\n    text-shadow: 0 0 2px rgba(0, 0, 0, 0.8);\n  }\n`;\n\nconst YouLabel = styled.div`\n  position: absolute;\n  top: 30%;\n  left: 40px;\n  color: white;\n  font-weight: bold;\n  font-size: 14px;\n  text-shadow: 0 0 4px rgba(0, 0, 0, 0.8);\n  background-color: rgba(231, 76, 60, 0.7);\n  padding: 3px 8px;\n  border-radius: 10px;\n  z-index: 10;\n`;\n\nconst PreviousBestLabel = styled.div`\n  position: absolute;\n  top: 80%;\n  left: 40px;\n  color: white;\n  font-weight: bold;\n  font-size: 14px;\n  text-shadow: 0 0 4px rgba(0, 0, 0, 0.8);\n  background-color: rgba(0, 0, 0, 0.5);\n  padding: 3px 8px;\n  border-radius: 10px;\n  z-index: 10;\n`;\n\nconst RaceTrack: React.FC<RaceTrackProps> = ({ position, previousBestPosition = 0 }) => {\n  // Use ref to track previous position to prevent backward movement\n  const prevPositionRef = useRef<number>(0);\n  const displayPositionRef = useRef<number>(0);\n  \n  // Use a smaller value to make car movement more gradual\n  const speedFactor = 0.15; // Reduced from 0.25 to make movement even smoother\n  \n  useEffect(() => {\n    // Track animation frame to allow cancellation\n    let animationFrameId: number;\n    \n    // Animation function for smooth car movement\n    const animatePosition = () => {\n      // Calculate the new position with easing\n      const targetPosition = Math.max(5, Math.min(90, position));\n      const currentPosition = displayPositionRef.current;\n      const distance = targetPosition - currentPosition;\n      \n      // Only update if there's a significant distance to travel\n      if (Math.abs(distance) > 0.1) {\n        // Move a percentage of the remaining distance for smooth easing\n        const newPosition = currentPosition + distance * speedFactor;\n        displayPositionRef.current = newPosition;\n        prevPositionRef.current = newPosition;\n        \n        // Continue animation\n        animationFrameId = requestAnimationFrame(animatePosition);\n      } else if (distance !== 0) {\n        // Final step - snap to target position\n        displayPositionRef.current = targetPosition;\n        prevPositionRef.current = targetPosition;\n      }\n    };\n    \n    // Start animation\n    animationFrameId = requestAnimationFrame(animatePosition);\n    \n    // Cleanup animation on unmount or when position changes\n    return () => {\n      if (animationFrameId) {\n        cancelAnimationFrame(animationFrameId);\n      }\n    };\n  }, [position, speedFactor]);\n  \n  // Use the current display position for rendering\n  const carPosition = displayPositionRef.current;\n  \n  // Previous best position\n  const shadowPosition = previousBestPosition < 5 ? 5 : previousBestPosition;\n  \n  // Calculate position for mile markers\n  const mileMarkers = [25, 50, 75];\n  \n  return (\n    <TrackContainer>\n      <Clouds />\n      <TrackRoad />\n      <LaneDivider />\n      <StartLine />\n      {mileMarkers.map((markerPos, index) => (\n        <MileMarker key={index} position={markerPos} />\n      ))}\n      <FinishLine />\n      \n      <YouLabel>You</YouLabel>\n      <Car position={carPosition} isTopLane={true}>\n        <Wheel left={18} />\n        <Wheel left={55} isRear={true} />\n        <Headlight left={78} />\n        <Headlight left={78} />\n        <Exhaust />\n      </Car>\n      \n      <PreviousBestLabel>Best</PreviousBestLabel>\n      <Car position={shadowPosition} isTopLane={false} isShadow={true}>\n        <Wheel left={18} />\n        <Wheel left={55} isRear={true} />\n      </Car>\n    </TrackContainer>\n  );\n};\n\nexport default RaceTrack; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAOC,MAAM,IAAIC,SAAS,QAAQ,mBAAmB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAOtD,MAAMC,cAAc,GAAGJ,MAAM,CAACK,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,EAAA,GAVIF,cAAc;AAYpB,MAAMG,UAAU,GAAGN,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMO,MAAM,GAAGR,MAAM,CAACK,GAAG;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAeE,UAAU;AACzB,CAAC;AAACE,GAAA,GATID,MAAM;AAWZ,MAAME,SAAS,GAAGV,MAAM,CAACK,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACM,GAAA,GAvCID,SAAS;AAyCf,MAAME,WAAW,GAAGZ,MAAM,CAACK,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACQ,GAAA,GAfID,WAAW;AAiBjB,MAAME,eAAe,GAAGb,SAAS;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMc,UAAU,GAAGf,MAAM,CAACK,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAeS,eAAe;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACE,GAAA,GAxBID,UAAU;AA0BhB,MAAME,SAAS,GAAGjB,MAAM,CAACK,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}